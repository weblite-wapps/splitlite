(function(e){function t(t){for(var s,l,u=t[0],i=t[1],c=t[2],d=0,p=[];d<u.length;d++)l=u[d],a[l]&&p.push(a[l][0]),a[l]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);o&&o(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,u=1;u<n.length;u++){var i=n[u];0!==a[i]&&(s=!1)}s&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var s={},a={0:0},r=[];function l(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=s,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(n,s,function(t){return e[t]}.bind(null,s));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/wapp/5b502b48e8ac737dd0225991/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var o=i;r.push([0,1]),n()})({"/3BZ":function(e,t,n){"use strict";var s=n("VOgb"),a=n.n(s);t["default"]=a.a},"/lVh":function(e,t,n){"use strict";var s=n("CrPq"),a=n.n(s);t["default"]=a.a},0:function(e,t,n){e.exports=n("Vtdi")},"0alK":function(e,t,n){"use strict";var s=n("Q9Od"),a=n.n(s);t["default"]=a.a},"3a/i":function(e,t,n){"use strict";var s=n("o99Z"),a=n.n(s);t["default"]=a.a},"52Mn":function(e,t,n){e.exports={"total-balance":"TotalBalance_total-balance_2Cdch","total-balance-caption":"TotalBalance_total-balance-caption_1ZuNb","total-balance-value-positive":"TotalBalance_total-balance-value-positive_15wIx","total-balance-value-negative":"TotalBalance_total-balance-value-negative_39cnt"}},"8AlO":function(e,t,n){"use strict";var s=n("uEy9"),a=n.n(s);t["default"]=a.a},"8MYI":function(e,t,n){"use strict";var s=n("UJ9p"),a=n.n(s);t["default"]=a.a},B18e:function(e,t,n){e.exports={root:"Checkbox_root_2b4dL",label:"Checkbox_label_2C81Y",checkbox:"Checkbox_checkbox_2Z7Ei",unselected:"Checkbox_unselected_1MYvg",selected:"Checkbox_selected_3khUK"}},CrPq:function(e,t,n){e.exports={"balance-item":"BalanceItem_balance-item_ZOWoB","balance-item-name":"BalanceItem_balance-item-name_dOzzZ","balance-item-value-positive":"BalanceItem_balance-item-value-positive_IKFBd","balance-item-value-negative":"BalanceItem_balance-item-value-negative_oXRNU"}},E86G:function(e,t,n){"use strict";var s=n("zYt9"),a=n.n(s);t["default"]=a.a},HNtU:function(e,t,n){"use strict";var s=n("52Mn"),a=n.n(s);t["default"]=a.a},L0Xj:function(e,t,n){},Ovxb:function(e,t,n){e.exports={header:"Header_header_1rqvn","header-section":"Header_header-section_RQVLS","header-title":"Header_header-title_ggnxV","header-icon":"Header_header-icon_qSXew"}},Q9Od:function(e,t,n){e.exports={"source-input":"SourceInput_source-input_2usTO","text-input":"SourceInput_text-input_33cIi","user-select":"SourceInput_user-select_3gQmL","user-option":"SourceInput_user-option_13c2W"}},QtCJ:function(e,t,n){},S79R:function(e,t,n){e.exports={sources:"SourcesSelect_sources_3gx_B","section-label":"SourcesSelect_section-label_3W6Eo","input-items":"SourcesSelect_input-items_3n-yJ","add-user":"SourcesSelect_add-user_1GQFv"}},UJ9p:function(e,t,n){e.exports={title:"Title_title_5gIrg","text-input":"Title_text-input_3uY1v"}},UbLb:function(e,t,n){},VOgb:function(e,t,n){e.exports={"button-container":"AddButton_button-container_2W2Ea"}},Vtdi:function(e,t,n){"use strict";n.r(t);n("yt8O"),n("VRzm");var s=n("Kw5r"),a=(n("pxaK"),n("QtCJ"),n("UbLb"),n("L0Xj"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("Header",{attrs:{currentPage:e.currentPage},on:{togglePage:e.togglePage}}),n("transition",{attrs:{name:"balances-move"}},[n("balances",{directives:[{name:"show",rawName:"v-show",value:"balances"===e.currentPage,expression:"currentPage === 'balances'"}],attrs:{balances:e.balances}})],1),n("transition",{attrs:{name:"add-trans-move"}},[n("add-trans",{directives:[{name:"show",rawName:"v-show",value:"addTrans"===e.currentPage,expression:"currentPage === 'addTrans'"}],attrs:{users:e.users,"wis-id":e.wisId,"connection-state":e.connectionState},on:{addTrans:e.addTrans}})],1)],1)}),r=[],l=n("k5N+"),u=(n("rGqo"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["add-trans"]},[n("div",{class:e.$style["inputs"]},[n("Title",{attrs:{title:e.title},on:{"update:title":function(t){e.title=t}}}),n("typeSelection",{attrs:{splitType:e.splitType},on:{"update:splitType":function(t){e.splitType=t}}}),n("div",{class:e.$style["users-section"]},[n("SourcesSelect",{attrs:{sources:e.sources,users:e.users},on:{remove:e.removeSource,add:e.addSource}}),n("TargetsSelect",{attrs:{targets:e.targets,users:e.users,curProperty:e.currentTargetProperty,splitType:e.splitType},on:{remove:e.removeTarget,add:e.addTarget}})],1)],1),n("transition",{attrs:{name:"add-button-move"}},[!1===e.warningProperty.show?n("add-button",{attrs:{label:"Add"},on:{click:e.addTrans}}):e._e()],1),n("transition",{attrs:{name:"warning-move"}},[n("Warning",{attrs:{show:e.warningProperty.show,message:e.warningProperty.msg}})],1)],1)}),i=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["sources"]},[n("div",{class:e.$style["section-label"]},[e._v(" Sources ")]),n("div",{class:e.$style["input-items"]},[e._l(e.sources,function(t,s){return n("div",{key:s},[n("SourceInput",{attrs:{users:e.users,sources:e.sources,index:s},on:{remove:function(t){e.$emit("remove",s)}}})],1)}),n("div",{class:[e.$style["add-user"],"noselect"]},[n("i",{on:{click:function(t){e.$emit("add")}}},[e._v(" add ")])])],2)])},o=[],d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["source-input"]},[n("div",{class:e.$style["user-input"]},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.sources[e.index].user,expression:"sources[index].user"}],class:e.$style["user-select"],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.sources[e.index],"user",t.target.multiple?n:n[0])}}},e._l(e.users,function(t,s){return n("option",{key:s,class:e.$style["user-option"],domProps:{value:t}},[e._v("\n            "+e._s(t)+"\n        ")])}))]),n("div",{class:e.$style["value-input"]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sources[e.index].value,expression:"sources[index].value"}],class:e.$style["text-input"],attrs:{type:"number",step:"0.001"},domProps:{value:e.sources[e.index].value},on:{input:function(t){t.target.composing||e.$set(e.sources[e.index],"value",t.target.value)}}})]),n("div",{class:[e.$style["remove-source"],"noselect"]},[n("i",{on:{click:function(t){e.$emit("remove",e.index)}}},[e._v(" delete ")])])])},p=[],v={name:"SourceUnit",props:["users","sources","index"]},f=v,h=n("0alK"),m=n("KHd+");function g(e){this["$style"]=h["default"].locals||h["default"]}var y=Object(m["a"])(f,d,p,!1,g,null,null),_=y.exports,b={name:"SourcesSelect",components:{SourceInput:_},props:["sources","users"]},$=b,T=n("ls/s");function x(e){this["$style"]=T["default"].locals||T["default"]}var w=Object(m["a"])($,c,o,!1,x,null,null),S=w.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["targets"]},[n("div",{class:e.$style["section-label"]},[e._v(" Targets ")]),n("div",{class:e.$style["input-items"]},[e._l(e.targets,function(t,s){return n("div",{key:s,class:e.$style["input-item"]},[n("TargetInput",{attrs:{users:e.users,targets:e.targets,index:s,curProperty:e.curProperty,splitType:e.splitType},on:{remove:function(t){e.$emit("remove",s)}}})],1)}),n("div",{class:[e.$style["add-user"],"noselect"]},[n("i",{on:{click:function(t){e.$emit("add")}}},[e._v(" add ")])])],2)])},O=[],k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["target-input"]},[n("div",{class:e.$style["user-select"]},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.targets[e.index].user,expression:"targets[index].user"}],class:e.$style["user-select"],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.targets[e.index],"user",t.target.multiple?n:n[0])}}},e._l(e.users,function(t,s){return n("option",{key:s,class:e.$style["user-option"],domProps:{value:t}},[e._v("\n            "+e._s(t)+"\n        ")])}))]),n("div",{class:e.$style["value-input"]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.targets[e.index][e.curProperty],expression:"targets[index][curProperty]"}],class:e.$style["text-input"],attrs:{type:"number",readonly:"equally"===e.splitType},domProps:{value:e.targets[e.index][e.curProperty]},on:{input:function(t){t.target.composing||e.$set(e.targets[e.index],e.curProperty,t.target.value)}}})]),n("div",{class:[e.$style["remove-target"],"noselect"]},[n("i",{on:{click:function(t){e.$emit("remove",e.index)}}},[e._v(" delete ")])])])},I=[],q={name:"SourceUnit",props:["users","targets","index","curProperty","splitType"]},B=q,E=n("qCcH");function j(e){this["$style"]=E["default"].locals||E["default"]}var C=Object(m["a"])(B,k,I,!1,j,null,null),A=C.exports,V={name:"TargetsSelect",components:{TargetInput:A},props:["targets","users","curProperty","splitType"],methods:{addTarget:function(){var e=this;this.users.length>0&&("equally"===this.splitType?(this.targets=this.targets.map(function(t){return{user:t.user,value:t.value,equalValue:e.sumOfSources/(e.targets.length+1)}}),this.targets.push({user:this.users[0],value:0,equalValue:this.sumOfSources/(this.targets.length+1)})):this.targets.push({user:this.users[0],value:0,equalValue:0}))},removeTarget:function(e){this.targets.splice(e,1)}}},U=V,N=n("8AlO");function W(e){this["$style"]=N["default"].locals||N["default"]}var H=Object(m["a"])(U,P,O,!1,W,null,null),M=H.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["type-section"]},[n("span",{class:e.$style["split-caption"]},[e._v(" split type ")]),n("div",{class:e.$style["types"]},[n("checkbox",{attrs:{label:"Equally",checked:"equally"==e.splitType},on:{click:function(t){e.changeType("equally")}}}),n("checkbox",{attrs:{label:"UnEqually",checked:"unequally"==e.splitType},on:{click:function(t){e.changeType("unequally")}}})],1)])},L=[],Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.root,"noselect"],on:{click:function(t){e.$emit("click")}}},[n("div",{class:[e.$style["checkbox"],e.checked?e.$style["selected"]:e.$style["unselected"]]}),n("span",{class:e.$style["label"]},[e._v(" "+e._s(e.label)+" ")])])},K=[],R={name:"AddButton",props:["label","checked"]},X=R,z=n("q07G");function Y(e){this["$style"]=z["default"].locals||z["default"]}var Z=Object(m["a"])(X,Q,K,!1,Y,null,null),J=Z.exports,F={name:"TypeSelection",components:{Checkbox:J},props:["splitType"],data:function(){return{title:""}},methods:{changeType:function(e){this.$emit("update:splitType",e)}}},D=F,ee=n("kQys");function te(e){this["$style"]=ee["default"].locals||ee["default"]}var ne=Object(m["a"])(D,G,L,!1,te,null,null),se=ne.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["button-container"],on:{click:function(t){e.$emit("click")}}},[e._v("\n  "+e._s(e.label)+"\n")])},re=[],le={name:"AddButton",props:["label"]},ue=le,ie=n("/3BZ");function ce(e){this["$style"]=ie["default"].locals||ie["default"]}var oe=Object(m["a"])(ue,ae,re,!1,ce,null,null),de=oe.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return!0===e.show?n("div",{staticClass:"warning"},[e._m(0),n("span",{staticClass:"warning-text"},[e._v(e._s(e.message))])]):e._e()},ve=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("i",[e._v(" warning ")])])}],fe={name:"Warning",props:["show","message"]},he=fe,me=(n("sB47"),Object(m["a"])(he,pe,ve,!1,null,"144c35c2",null)),ge=me.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["title"]},[n("span",{class:e.$style["title-label"]}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],class:e.$style["text-input"],attrs:{placeholder:"Title"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})])},_e=[],be={name:"Header",watch:{title:function(e){this.$emit("update:title",e)}},data:function(){return{title:""}},created:function(){var e=this;Gt.$on("resetTransState",function(){return e.title=""})}},$e=be,Te=n("8MYI");function xe(e){this["$style"]=Te["default"].locals||Te["default"]}var we=Object(m["a"])($e,ye,_e,!1,xe,null,null),Se=we.exports,Pe=n("iv4g"),Oe=(n("INYr"),window),ke=Oe.R,Ie=function(e,t){return ke.filter(ke.propEq("user",e),t)},qe=function(e,t,n){return ke.sum(ke.pluck(t,Ie(e,n)))},Be=function(e,t){return function(n){return ke.map(function(e){return{user:e,value:qe(e,t,n)}},e)}},Ee=ke.filter(ke.prop("value")),je=function(e,t,n){return ke.compose(Ee,Be(n,t))(e)},Ce=function(e,t){return function(n,s){var a=je(n,"value",e),r=je(s,t,e);return{sources:a,targets:r}}},Ae=function(e,t){var n=ke.lensPath([e,"value"]);return ke.set(n,t)},Ve=function(e){return function(t){var n=t.sources,s=t.targets,a=ke.findIndex(function(t){var n=t.user;return n==e.user},n),r=ke.findIndex(function(t){var n=t.user;return n==e.user},s);if(a<0||r<0)return t;var l=s[r].value,u=n[a].value,i=u-l;if(i>=0){var c=Ae(a,i)(n),o=Ae(r,0)(s);return{sources:c,targets:o}}var d=Ae(a,0)(n),p=Ae(r,-i)(s);return{sources:d,targets:p}}},Ue=function(e){var t=e.sources,n=e.targets;if(!t.length||!n.length)return{sources:null,targets:null};var s=ke.pipe.apply(ke,Object(Pe["a"])(ke.map(Ve,t))),a=s({sources:t,targets:n}),r=ke.filter(ke.prop("value"),a.sources),l=ke.filter(ke.prop("value"),a.targets);return{sources:r,targets:l}},Ne=function(e,t){return function(n){var s=n.sources,a=n.targets;if(!s||!a||!s.length||!a.length)return null;var r=ke.sum(ke.pluck("value",s)),l=function(e){var t=ke.map(function(t){return{from:e.user,to:t.user,value:t.value/r*e.value}},s);return ke.insertAll(0,t)},u=ke.pipe.apply(ke,Object(Pe["a"])(ke.map(l,a)))([]);return{title:e,sources:s,payments:u,wisId:t}}},We=window,He=We.R,Me={name:"AddTrans",props:["users","wisId","connectionState"],components:{SourcesSelect:S,TargetsSelect:M,TypeSelection:se,AddButton:de,Warning:ge,Title:Se},data:function(){return{sources:[],targets:[],title:"",splitType:"equally"}},watch:{sumOfSources:function(){var e=this;this.targets=this.targets.map(function(t){return{user:t.user,value:t.value,equalValue:e.sumOfSources/e.targets.length}})}},computed:{warningProperty:function(){return"disConnected"===this.connectionState?{show:!0,msg:"Can NOT connect to server :("}:this.title.trim()?"unequally"===this.splitType&&this.sumOfSources!=this.sumOfTargets?{show:!0,msg:"Sum of sources and targets are not equal !"}:this.resultTrans&&this.resultTrans.payments.length?{show:!1,msg:""}:{show:!0,msg:"No payment needed so far!"}:{show:!0,msg:"Enter transaction title!"}},sumOfSources:function(){return He.sum(He.pluck("value",this.sources))},sumOfTargets:function(){return He.sum(He.pluck("value",this.targets))},currentTargetProperty:function(){return"unequally"===this.splitType?"value":"equalValue"},resultTrans:function(){var e=He.compose(Ne(this.title,this.wisId),Ue,Ce(this.users,this.currentTargetProperty));return e(this.sources,this.targets)}},methods:{changeEqualValueTarget:function(){var e=this;this.targets=He.map(function(t){var n=t.user,s=t.value;return{user:n,value:s,equalValue:e.sumOfSources/e.targets.length}},this.targets)},resetState:function(){this.title="",this.sources=[],this.targets=[],this.splitType="equally"},addTrans:function(){this.$emit("addTrans",this.resultTrans)},addTarget:function(){this.users.length&&("equally"===this.splitType?(this.targets.push({user:this.users[0],value:0,equalValue:this.sumOfSources/(this.targets.length+1)}),this.changeEqualValueTarget()):this.targets.push({user:this.users[0],value:0,equalValue:0}))},removeTarget:function(e){this.targets.splice(e,1),this.changeEqualValueTarget()},addSource:function(){this.users.length&&this.sources.push({user:this.users[0],value:0})},removeSource:function(e){this.sources.splice(e,1)}},created:function(){Gt.$on("resetTransState",this.resetState)}},Ge=Me,Le=n("3a/i");function Qe(e){this["$style"]=Le["default"].locals||Le["default"]}var Ke=Object(m["a"])(Ge,u,i,!1,Qe,null,null),Re=Ke.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["balances"]},[n("div",{class:e.$style["items"]},e._l(e.balances,function(e,t){return n("BalanceItem",{key:t,attrs:{user:e.user,value:e.value}})})),n("total-balance",{attrs:{"total-balance":e.totalBalance}})],1)},ze=[],Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["total-balance"]},[n("div",{class:e.$style["total-balance-caption"]},[e._v("\n      Total Balance\n  ")]),n("div",{class:e.$style["total-balance-value-"+(e.totalBalance<=0?"positive":"negative")]},[e._v("\n      "+e._s(e.getPresentingForm(e.totalBalance))+"\n  ")])])},Ze=[],Je={methods:{getPresentingForm:function(e){return Math.abs(e)}}},Fe={name:"TotalBalance",mixins:[Je],props:["totalBalance"]},De=Fe,et=n("HNtU");function tt(e){this["$style"]=et["default"].locals||et["default"]}var nt=Object(m["a"])(De,Ye,Ze,!1,tt,null,null),st=nt.exports,at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style["balance-item"]},[n("div",{class:e.$style["balance-item-name"]},[e._v("\n      "+e._s(e.user)+"\n  ")]),n("div",{class:e.value<=0?e.$style["balance-item-value-positive"]:e.$style["balance-item-value-negative"]},[e._v("\n      "+e._s(e.getPresentingForm(e.value))+"\n  ")])])},rt=[],lt={name:"BalanceItem",mixins:[Je],props:["user","value"]},ut=lt,it=n("/lVh");function ct(e){this["$style"]=it["default"].locals||it["default"]}var ot=Object(m["a"])(ut,at,rt,!1,ct,null,null),dt=ot.exports,pt=window,vt=pt.R,ft={name:"Balances",props:{balances:Array},components:{BalanceItem:dt,TotalBalance:st},computed:{totalBalance:function(){return vt.sum(vt.pluck("value",this.balances))}}},ht=ft,mt=n("E86G");function gt(e){this["$style"]=mt["default"].locals||mt["default"]}var yt=Object(m["a"])(ht,Xe,ze,!1,gt,null,null),_t=yt.exports,bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.header},[n("transition",{attrs:{name:"add-trans-header-move"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"addTrans"===e.currentPage,expression:"currentPage === 'addTrans'"}],class:e.$style["header-section"]},[n("i",{class:[e.$style["header-icon"],"noselect"],on:{click:function(t){e.$emit("togglePage")}}},[e._v("\n        keyboard_arrow_left\n      ")]),n("span",{class:e.$style["header-title"]},[e._v("Add Transaction")])])]),n("transition",{attrs:{name:"balances-header-move"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"balances"===e.currentPage,expression:"currentPage === 'balances'"}],class:e.$style["header-section"]},[n("span",{class:e.$style["header-title"]},[e._v("SplitLite")]),n("i",{class:[e.$style["header-add"],"noselect"],on:{click:function(t){e.$emit("togglePage")}}},[e._v("\n        add\n      ")])])])],1)},$t=[],Tt={name:"Header",props:["currentPage"]},xt=Tt,wt=n("XpiM");function St(e){this["$style"]=wt["default"].locals||wt["default"]}var Pt=Object(m["a"])(xt,bt,$t,!1,St,null,null),Ot=Pt.exports,kt=(n("f3/d"),window),It=kt.W,qt=(kt.R,function(e){It.loadData().then(function(t){var n=t.user.name;e.username=n,e.wisId=It.wisId,It.start(),e.addUser()})}),Bt=n("24Ii"),Et=n.n(Bt),jt={server:"https://weblite.me:3092"},Ct={addUser:function(e,t){return Et.a.post("".concat(jt.server,"/users/add")).send({username:e,wisId:t})},fetchUsers:function(e){return Et.a.get("".concat(jt.server,"/users/fetch")).query({wisId:e}).then(function(e){return e.body})},fetchGraph:function(e){return Et.a.get("".concat(jt.server,"/graph/fetch")).query({wisId:e}).then(function(e){return e.body})},addTrans:function(e){return Et.a.post("".concat(jt.server,"/transaction/add")).send(e)}},At=window,Vt=At.W,Ut=At.R,Nt={name:"App",components:{Balances:_t,AddTrans:Re,Warning:ge,Header:Ot},data:function(){return{username:"",wisId:"",users:[],balanceGraph:[],transactions:[],currentPage:"balances",connectionState:"none"}},computed:{balances:function(){var e=this;return Ut.compose(Ut.map(function(e){var t=e.target,n=e.value;return{user:t,value:n}}),Ut.filter(function(t){var n=t.source,s=t.value;return n===e.username&&s}))(this.balanceGraph)}},created:function(){Vt&&qt(this),!Vt&&this.addUser()},methods:{toggleConnectionWarning:function(){var e=this;this.connectionState="disConnected",setTimeout(function(){return e.connectionState="none"},2e3)},addUser:function(){Ct.addUser(this.username,this.wisId).then(this.fetchData).catch(this.toggleConnectionWarning)},togglePage:function(){this.fetchData(),this.currentPage="balances"===this.currentPage?"addTrans":"balances"},fetchData:function(){var e=this;Promise.all([Ct.fetchUsers(this.wisId),Ct.fetchGraph(this.wisId)]).then(function(t){var n=Object(l["a"])(t,2),s=n[0],a=n[1];e.users=Ut.map(Ut.prop("username"),s),e.balanceGraph=a.balances}).catch(this.toggleConnectionWarning)},addTrans:function(e){var t=this;Ct.addTrans(e).then(this.fetchData).then(function(){t.togglePage(),Gt.$emit("resetTransState")}).catch(this.toggleConnectionWarning)}}},Wt=Nt,Ht=(n("pQ4I"),Object(m["a"])(Wt,a,r,!1,null,"58cffc40",null)),Mt=Ht.exports;n.d(t,"bus",function(){return Gt}),s["a"].config.productionTip=!1;var Gt=new s["a"];new s["a"]({render:function(e){return e(Mt)}}).$mount("#app")},XpiM:function(e,t,n){"use strict";var s=n("Ovxb"),a=n.n(s);t["default"]=a.a},kQys:function(e,t,n){"use strict";var s=n("nkXj"),a=n.n(s);t["default"]=a.a},lAHh:function(e,t,n){e.exports={"target-input":"TargetInput_target-input_1Kw5X","text-input":"TargetInput_text-input_EhhoP","user-select":"TargetInput_user-select_1Pa76","user-option":"TargetInput_user-option_15MWz"}},"ls/s":function(e,t,n){"use strict";var s=n("S79R"),a=n.n(s);t["default"]=a.a},nkXj:function(e,t,n){e.exports={"type-section":"TypeSelection_type-section_GxyoL",types:"TypeSelection_types_2W7Ld","split-caption":"TypeSelection_split-caption_3Ee5A"}},o99Z:function(e,t,n){e.exports={"add-trans":"AddTrans_add-trans_3t1ba","users-section":"AddTrans_users-section_1Wy2T",inputs:"AddTrans_inputs_1zzEg"}},pQ4I:function(e,t,n){"use strict";var s=n("uj12"),a=n.n(s);a.a},pxaK:function(e,t,n){},py9A:function(e,t,n){},q07G:function(e,t,n){"use strict";var s=n("B18e"),a=n.n(s);t["default"]=a.a},qCcH:function(e,t,n){"use strict";var s=n("lAHh"),a=n.n(s);t["default"]=a.a},sB47:function(e,t,n){"use strict";var s=n("py9A"),a=n.n(s);a.a},uEy9:function(e,t,n){e.exports={targets:"TargetsSelect_targets_1ia9q","section-label":"TargetsSelect_section-label_3r1X1","input-items":"TargetsSelect_input-items_3B-c0","add-user":"TargetsSelect_add-user_2vraM"}},uj12:function(e,t,n){},zYt9:function(e,t,n){e.exports={balances:"Balances_balances_1H8dK",items:"Balances_items_3OFvL"}}});
//# sourceMappingURL=app.50d1b530.js.map